## 题目2：公交线路换乘优化

### 一、算法设计思路
公交网络由“线路-站点序列”组成，同一站点可出现在多条线路中。

本题实现两种优化目标：
1. 最少换乘次数（BFS）
   - 将“线路”作为图节点。
   - 若两条线路共享至少一个站点，则可在该站点换乘，线路之间连边。
   - 从包含起点站的所有线路作为 BFS 起点层，首次到达包含终点站的线路即可得到最少换乘次数。
2. 综合考虑换乘次数与总站数（加权图）
   - 用状态 `(站点, 当前线路)` 建图并 Dijkstra。
   - 沿同一线路相邻站点移动代价为 1（总站数）。
   - 在同一站点换乘到另一条线路代价为 `BIG`（一个很大的常数），从而实现“先最小换乘，再最小总站数”的字典序优化。

### 二、核心代码说明
- `solveMinTransfers(...)`：基于线路图 BFS，输出线路序列与站点序列。
- `solveWeighted(...)`：状态图 Dijkstra，输出换乘数、总站数、线路序列与站点序列。
- `appendSegment(...)`：在某条线路的站点序列中截取从A到B的站点路径，并拼接到全局方案。

核心代码位置：[main.cpp](file:///e:/软件/ACM/学校/算法设计与分析/2/main.cpp)

### 三、复杂度分析
设线路数 `L`，站点数 `S`，所有线路站点总数为 `T`。
- 最少换乘（BFS）：
  - 最坏情况下遍历“线路-站点-线路”的可达关系，时间复杂度约 `O(L*S + T)`，空间 `O(L+T)`。
- 加权方案（Dijkstra）：
  - 状态数约为 `T + 1`，每个状态扩展“相邻站移动 + 站内换乘”，时间复杂度约 `O((T + E) log T)`，空间 `O(T)`。

### 四、运行结果展示
程序会在每次查询后输出 `Elapsed(ms)`（基于 `clock()`），可直接截图作为“实测数据”。
示例输入：
```
3
5 A B C D E
4 C F G H
4 D I J K
2
1 A H
2 A K
```
建议截图：
- type=1 输出最少换乘次数、线路序列、站点序列
- type=2 输出换乘数/总站数的综合最优结果与完整路径

### 五、总结与心得
- 仅优化换乘次数时，将“线路”抽象为节点可显著降低问题规模。
- 想同时优化“换乘+总站数”时，需要引入“当前线路”作为状态，才能正确表达换乘代价。
